name: "Qoder Auto Review"

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  auto-review:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - name: "Checkout"
        uses: actions/checkout@v4

      - name: "Run Qoder Auto Review"
        uses: wenxinax/qoder-action@dev
        with:
          trigger_on: "event"
          dashscope_api_key: ${{ secrets.DASHSCOPE_API_KEY }}
          prompt: |
            请仔细审查这个 pull request，并提供全面的反馈。

            请重点关注以下方面：
            - 代码质量和最佳实践
            - 潜在的 bug 或问题
            - 性能考量
            - 安全隐患
            - 测试覆盖率
            - 是否需要更新文档

            请提供建设性的反馈和具体的改进建议。